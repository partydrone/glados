<%= form_for [:admin, @download], validates: true do |f| %>
  <%= label_tag :translation_locale %>
  <%= select_tag :translation_locale, options_for_select(I18n.available_locales.map { |l| ["#{humanize_locale(l)}#{' âœ“' if @download.title_backend.locales.include? l}", l.to_s] }, I18n.locale.to_s), id: 'translation_locale' %>

  <%= f.label :download_type_id %>
  <%= f.select :download_type_id, DownloadType.all.collect { |dt| [dt.name, dt.id] } %>
  <%= f.label :title %>
  <%= f.text_field :title %>

  <div class="row">
    <div class="medium-6 columns">
      <%= f.label :attachment %>
      <%= f.attachment_field :file, direct: true, presigned: true %>
    </div>
    <div class="medium-6 columns">
      <%= f.label :current_file %>
      <% if @download.file && @download.file.exists? %>
        <%= link_to nil, attachment_url(@download, :file, filename: @download.title.parameterize), id: 'download_current_file_link', target: '_blank' %>
      <% else %>
        N/A
      <% end %>
    </div>
  </div>

  <h3>Associated Products</h3>
  <div class="row">
    <% @product_types.each do |product_type| %>
      <div class="medium-<%= 12 / @product_types.count %> columns">
        <h4><%= product_type.name %></h4>
        <ul class="no-bullet">
          <%= f.collection_check_boxes :product_ids, product_type.products, :id, :name do |b| %>
            <li>
              <%= b.check_box %>
              <%= b.label %>
            </li>
          <% end if product_type.products %>
        </ul>
      </div>
    <% end if @product_types %>
  </div>

  <%= f.button class: 'button radius' %>
<% end %>
